---
import { RadioBrowserApi } from "radio-browser-api";
import StationCard from "@/components/StationCard.astro";
import Layout from "@/layouts/Layout.astro";

const api = new RadioBrowserApi("Simple Radio Browser App");
async function getTopStationsByCountry(countryCode: string) {
	const stations = await api.searchStations({
		countryCode: countryCode,
		limit: 20,
		order: "votes",
		reverse: true,
		hideBroken: true,
	});
	return stations;
}
const topSpanishStations = await getTopStationsByCountry("ES");
---

<Layout title="Simple Radio Browser">
	<div
		id="playlist-container"
		class="relative transition-all duration-1000 bg-blue-400/60 overflow-y-auto"
		transition:animate="fade"
	>
		<div class="relative z-10 px-6 max-w-[1500px] mx-auto">
			<div
				class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-x-4 gap-y-6 py-6"
			>
				{topSpanishStations.map((station) => <StationCard station={station} />)}
			</div>
		</div>
		<div class="absolute inset-0 bg-linear-to-t from-card via-zinc-900"></div>
	</div>
</Layout>
